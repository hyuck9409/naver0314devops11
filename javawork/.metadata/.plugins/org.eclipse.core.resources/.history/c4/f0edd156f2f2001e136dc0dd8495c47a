package dat0405db;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Scanner;

public class Ex3SawonSearchName {

	static final String MYSQL_DRIVER="com.mysql.cj.jdbc.Driver";
	static final String MYSQL_URL="jdbc:mysql://localhost:3306/bit701?serverTimezone=Asia/Seoul";
	static final String USERNAME="root";
	static final String PASSWORD="1234";
	
	public Ex3SawonSearchName() {
	try {
		Class.forName(MYSQL_DRIVER);
		System.out.println("Mysql8 드라이버 성공!");
	} catch (ClassNotFoundException e) {
		System.out.println("Mysql8 드라이버 오류!"+e.getMessage());
		// TODO Auto-generated catch block
		
	}
	}
	public void searchSawon(String searchName)
	{
		Connection conn=null;
		PreparedStatement stmt=null;
		ResultSet rs=null;
		String sql="select * from sawon where name like ?";
		//System.out.println(sql);
		
		boolean find=false;
		
		try {
			conn=DriverManager.getConnection(MYSQL_URL, USERNAME, PASSWORD);
			stmt=conn.prepareStatement(sql);
			stmt.setString(1, "%"+searchName+"%");
			rs=stmt.executeQuery();
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}	
	}
	
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Ex3SawonSearchName ex3=new Ex3SawonSearchName();
		Scanner sc=new Scanner(System.in);
		String searchName="";
		while(true)
		{
			System.out.println("검색할 이름을 입력해주세요(종료:x)");
			searchName=sc.nextLine();
			if(searchName.equalsIgnoreCase("x"))
			{
				System.out.println("종료합니다");
				break;
			}
			ex3.searchSawon(searchName);
			System.out.println();
		}
	}

}
